<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Disposition Table • esubdemo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Disposition Table">
<meta property="og:description" content="esubdemo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">esubdemo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tlf-01-disposition.html">Disposition Table</a>
    </li>
    <li>
      <a href="../articles/tlf-02-population.html">Analysis Population Table</a>
    </li>
    <li>
      <a href="../articles/tlf-03-baseline.html">Baseline Characteristics Table</a>
    </li>
    <li>
      <a href="../articles/tlf-04-efficacy.html">Efficacy Table</a>
    </li>
    <li>
      <a href="../articles/tlf-05-ae-summary.html">AE Summary Table</a>
    </li>
    <li>
      <a href="../articles/tlf-06-ae-spec.html">Specific AE Table</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tlf-01-disposition_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Disposition Table</h1>
            
      
      
      <div class="hidden name"><code>tlf-01-disposition.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="disposition">Disposition<a class="anchor" aria-label="anchor" href="#disposition"></a>
</h2>
<p>Following the <a href="https://database.ich.org/sites/default/files/E3_Guideline.pdf" class="external-link">ICH E3 guidance</a>, we need to summarize accounting of all patients who entered the study, in Section 10.1, Disposition of Patients. The disposition of patients reports the numbers of patients who were randomized, and who entered and completed each phase of the study, as well as the reasons for all post-randomization discontinuations, grouped by treatment and by major reason (lost to follow-up, adverse event, poor compliance etc.).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">esubdemo</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in eval(ei, envir): The current R version is not the same with the</span>
<span class="co">## current project in 4.1.0</span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span> <span class="co"># Read SAS data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># Manipulate data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span> <span class="co"># Manipulate data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/r2rtf/" class="external-link">r2rtf</a></span><span class="op">)</span> <span class="co"># Reporting in RTF format</span></code></pre></div>
<p>The first step is to read relevant datasets into R. For disposition table, all the required information is saved in the ADSL dataset. We can use <code>haven</code> package to read the dataset.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_sas.html" class="external-link">read_sas</a></span><span class="op">(</span><span class="st">"data-adam/adsl.sas7bdat"</span><span class="op">)</span></code></pre></div>
<p>We illustrate how to prepare a report data for a simplified disposition of patients table using variables below:</p>
<ul>
<li>USUBJID: Unique subject identifier</li>
<li>TRT01P: Planed treatment</li>
<li>TRT01PN: Planned treatment encoding</li>
<li>DISCONFL: Discontinued from study flag</li>
<li>DCREASCD: Discontinued from study reason</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">TRT01P</span>, <span class="va">TRT01PN</span>, <span class="va">DISCONFL</span>, <span class="va">DCREASCD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 4 × 5</span></span>
<span class="co">##   USUBJID     TRT01P               TRT01PN DISCONFL DCREASCD        </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 01-701-1015 Placebo                    0 <span style="color: #949494;">""</span>       Completed       </span>
<span class="co">## <span style="color: #BCBCBC;">2</span> 01-701-1023 Placebo                    0 <span style="color: #949494;">"</span>Y<span style="color: #949494;">"</span>      Adverse Event   </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> 01-701-1028 Xanomeline High Dose      81 <span style="color: #949494;">""</span>       Completed       </span>
<span class="co">## <span style="color: #BCBCBC;">4</span> 01-701-1033 Xanomeline Low Dose       54 <span style="color: #949494;">"</span>Y<span style="color: #949494;">"</span>      Sponsor Decision</span></code></pre>
<p>In the code below, we calculated patients in the analysis population.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_rand</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">TRT01PN</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>
    names_from <span class="op">=</span> <span class="va">TRT01PN</span>,
    names_prefix <span class="op">=</span> <span class="st">"n_"</span>,
    values_from <span class="op">=</span> <span class="va">n</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>row <span class="op">=</span> <span class="st">"Patients in population"</span><span class="op">)</span>
<span class="va">n_rand</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 4</span></span>
<span class="co">##     n_0  n_54  n_81 row                   </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 </span>
<span class="co">## <span style="color: #BCBCBC;">1</span>    86    84    84 Patients in population</span></code></pre>
<p>In the code below, we calculate number and percentage of patients who discontinued the study.</p>
<p>Here we use <code><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC()</a></code> to customize the numeric value to be 1 decimal with fixed width of 5.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_disc</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">TRT01PN</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">DISCONFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span>,
    pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>,
      digits <span class="op">=</span> <span class="fl">1</span>, format <span class="op">=</span> <span class="st">"f"</span>, width <span class="op">=</span> <span class="fl">5</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>
    names_from <span class="op">=</span> <span class="va">TRT01PN</span>,
    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">pct</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>row <span class="op">=</span> <span class="st">"Discontinued"</span><span class="op">)</span>

<span class="va">n_disc</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span>
<span class="co">##     n_0  n_54  n_81 pct_0   pct_54  pct_81  row         </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="co">## <span style="color: #BCBCBC;">1</span>    28    59    57 <span style="color: #949494;">"</span> 32.6<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 70.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 67.9<span style="color: #949494;">"</span> Discontinued</span></code></pre>
<p>In the code below, we calculate number and percentage of patients who completed/discontinued the study in different reasons.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_reason</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">TRT01PN</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n_total <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">TRT01PN</span>, <span class="va">DCREASCD</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>
    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,
    pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">n_total</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>,
      digits <span class="op">=</span> <span class="fl">1</span>, format <span class="op">=</span> <span class="st">"f"</span>, width <span class="op">=</span> <span class="fl">5</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>
    id_cols <span class="op">=</span> <span class="va">DCREASCD</span>,
    names_from <span class="op">=</span> <span class="va">TRT01PN</span>,
    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">pct</span><span class="op">)</span>,
    values_fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">0</span>, pct <span class="op">=</span> <span class="st">"  0.0"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>row <span class="op">=</span> <span class="va">DCREASCD</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `summarise()` has grouped output by 'TRT01PN'. You can override using the</span>
<span class="co">## `.groups` argument.</span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_reason</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 × 7</span></span>
<span class="co">##    row                  n_0  n_54  n_81 pct_0   pct_54  pct_81 </span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> Adverse Event          8    44    40 <span style="color: #949494;">"</span>  9.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 52.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 47.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> Completed             58    25    27 <span style="color: #949494;">"</span> 67.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 29.8<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 32.1<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> Death                  2     1     0 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> I/E Not Met            1     0     2 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> Lack of Efficacy       3     0     1 <span style="color: #949494;">"</span>  3.5<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> Lost to Follow-up      1     1     0 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> Physician Decision     1     0     2 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> Protocol Violation     1     1     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> Sponsor Decision       2     2     3 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  3.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> Withdrew Consent       9    10     8 <span style="color: #949494;">"</span> 10.5<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 11.9<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  9.5<span style="color: #949494;">"</span></span></code></pre>
<p>In the code below, we calculate number and percentage of patients who complete the study. We split <code>n_reason</code> because we need to customize the row order of the table.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_complete</span> <span class="op">&lt;-</span> <span class="va">n_reason</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">row</span> <span class="op">==</span> <span class="st">"Completed"</span><span class="op">)</span>

<span class="va">n_complete</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span>
<span class="co">##   row         n_0  n_54  n_81 pct_0   pct_54  pct_81 </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> Completed    58    25    27 <span style="color: #949494;">"</span> 67.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 29.8<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 32.1<span style="color: #949494;">"</span></span></code></pre>
<p>In the code below, we calculate number and percentage of patients who discontinued the study in different reasons. Here we use <code>paste0("    ", row)</code> to add some leading space for individual reasons for study discontinuation.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_reason</span> <span class="op">&lt;-</span> <span class="va">n_reason</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">row</span> <span class="op">!=</span> <span class="st">"Completed"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>row <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"    "</span>, <span class="va">row</span><span class="op">)</span><span class="op">)</span>

<span class="va">n_reason</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 9 × 7</span></span>
<span class="co">##   row                        n_0  n_54  n_81 pct_0   pct_54  pct_81 </span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="co">## <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">"</span>    Adverse Event<span style="color: #949494;">"</span>          8    44    40 <span style="color: #949494;">"</span>  9.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 52.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 47.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">"</span>    Death<span style="color: #949494;">"</span>                  2     1     0 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">3</span> <span style="color: #949494;">"</span>    I/E Not Met<span style="color: #949494;">"</span>            1     0     2 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">4</span> <span style="color: #949494;">"</span>    Lack of Efficacy<span style="color: #949494;">"</span>       3     0     1 <span style="color: #949494;">"</span>  3.5<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">5</span> <span style="color: #949494;">"</span>    Lost to Follow-up<span style="color: #949494;">"</span>      1     1     0 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">6</span> <span style="color: #949494;">"</span>    Physician Decision<span style="color: #949494;">"</span>     1     0     2 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">7</span> <span style="color: #949494;">"</span>    Protocol Violation<span style="color: #949494;">"</span>     1     1     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">8</span> <span style="color: #949494;">"</span>    Sponsor Decision<span style="color: #949494;">"</span>       2     2     3 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  3.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">9</span> <span style="color: #949494;">"</span>    Withdrew Consent<span style="color: #949494;">"</span>       9    10     8 <span style="color: #949494;">"</span> 10.5<span style="color: #949494;">"</span> <span style="color: #949494;">"</span> 11.9<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  9.5<span style="color: #949494;">"</span></span></code></pre>
<p>Now we combined individual rows into the whole table for reporting purpose. <code>tbl_disp</code> is used as input for <code>r2rtf</code> to create final report.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tbl_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">n_rand</span>, <span class="va">n_complete</span>, <span class="va">n_disc</span>, <span class="va">n_reason</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">row</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_0"</span>, <span class="st">"_54"</span>, <span class="st">"_81"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">tbl_disp</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 12 × 7</span></span>
<span class="co">##    row                        n_0 pct_0    n_54 pct_54   n_81 pct_81 </span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">"</span>Patients in population<span style="color: #949494;">"</span>    86  <span style="color: #BB0000;">NA</span>        84  <span style="color: #BB0000;">NA</span>        84  <span style="color: #BB0000;">NA</span>    </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">"</span>Completed<span style="color: #949494;">"</span>                 58 <span style="color: #949494;">"</span> 67.4<span style="color: #949494;">"</span>    25 <span style="color: #949494;">"</span> 29.8<span style="color: #949494;">"</span>    27 <span style="color: #949494;">"</span> 32.1<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">"</span>Discontinued<span style="color: #949494;">"</span>              28 <span style="color: #949494;">"</span> 32.6<span style="color: #949494;">"</span>    59 <span style="color: #949494;">"</span> 70.2<span style="color: #949494;">"</span>    57 <span style="color: #949494;">"</span> 67.9<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">"</span>    Adverse Event<span style="color: #949494;">"</span>          8 <span style="color: #949494;">"</span>  9.3<span style="color: #949494;">"</span>    44 <span style="color: #949494;">"</span> 52.4<span style="color: #949494;">"</span>    40 <span style="color: #949494;">"</span> 47.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">"</span>    Death<span style="color: #949494;">"</span>                  2 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     0 <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">"</span>    I/E Not Met<span style="color: #949494;">"</span>            1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     0 <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span>     2 <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">"</span>    Lack of Efficacy<span style="color: #949494;">"</span>       3 <span style="color: #949494;">"</span>  3.5<span style="color: #949494;">"</span>     0 <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">"</span>    Lost to Follow-up<span style="color: #949494;">"</span>      1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     0 <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">"</span>    Physician Decision<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     0 <span style="color: #949494;">"</span>  0.0<span style="color: #949494;">"</span>     2 <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">"</span>    Protocol Violation<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span>     1 <span style="color: #949494;">"</span>  1.2<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">11</span> <span style="color: #949494;">"</span>    Sponsor Decision<span style="color: #949494;">"</span>       2 <span style="color: #949494;">"</span>  2.3<span style="color: #949494;">"</span>     2 <span style="color: #949494;">"</span>  2.4<span style="color: #949494;">"</span>     3 <span style="color: #949494;">"</span>  3.6<span style="color: #949494;">"</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span> <span style="color: #949494;">"</span>    Withdrew Consent<span style="color: #949494;">"</span>       9 <span style="color: #949494;">"</span> 10.5<span style="color: #949494;">"</span>    10 <span style="color: #949494;">"</span> 11.9<span style="color: #949494;">"</span>     8 <span style="color: #949494;">"</span>  9.5<span style="color: #949494;">"</span></span></code></pre>
<p>We start to define the format of the output. We highlighted items that is not discussed in previous discussion.</p>
<p><code><a href="https://merck.github.io/r2rtf/reference/rtf_title.html" class="external-link">rtf_title()</a></code> defines the table title. We can provide a vector for the title argument. Each value is a separate line. The format can also be controlled by providing a vector input in text format.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tbl_disp</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Table title</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_title.html" class="external-link">rtf_title</a></span><span class="op">(</span><span class="st">"Disposition of Patients"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># First row of column header</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html" class="external-link">rtf_colheader</a></span><span class="op">(</span><span class="st">" | Placebo | Xanomeline Low Dose| Xanomeline High Dose"</span>,
    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Second row of column header</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_colheader.html" class="external-link">rtf_colheader</a></span><span class="op">(</span><span class="st">" | n | (%) | n | (%) | n | (%)"</span>,
    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">1.3</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
    border_top <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"single"</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,
    border_left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"single"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"single"</span>, <span class="st">""</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Table body</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_body.html" class="external-link">rtf_body</a></span><span class="op">(</span>
    col_rel_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">1.3</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
    text_justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,
    border_left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"single"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"single"</span>, <span class="st">""</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Encoding RTF syntax</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/rtf_encode.html" class="external-link">rtf_encode</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="co"># Save to a file</span>
  <span class="fu"><a href="https://merck.github.io/r2rtf/reference/write_rtf.html" class="external-link">write_rtf</a></span><span class="op">(</span><span class="st">"tlf/tbl_disp.rtf"</span><span class="op">)</span></code></pre></div>
<p>In conclusion, the procedure to generate a AE summary table as shown in the above example is listed as follows:</p>
<ul>
<li>Step 1: Read data into R, i.e. <code>adsl</code>.</li>
<li>Step 2: Count patients in the analysis population and name the dataset as <code>n_rand</code>.</li>
<li>Step 3: Count the number and percentage of patients who discontinued the study, and name the dataset as <code>n_disc</code>.</li>
<li>Step 4: Count the number and percentage of of patients who discontinued the study in different reasons, and name the dataset as <code>n_reason</code>. format it by <code>r2rtf</code>.</li>
<li>Step 5: Count the number and percentage of of patients who completed the study, and name the dataset as <code>n_complete</code>.</li>
<li>Step 6: Rowly bind <code>n_rand</code>, <code>n_disc</code>, <code>n_reason</code> and <code>n_complete</code> and format it by <code>r2rtf</code>.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yilong Zhang.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
